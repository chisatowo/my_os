# 操作系统真相还原第14章：文件系统
## 实验小节e：
功能:将字符串写入指定fd的文件,并将文件内容写回磁盘,可以通过xxd命令在磁盘指定位置中找到.
1. 修改file.c文件,增加file_write函数用于把buf中的count个字节写入文件。核心原理：传进函数的文件结构struct file指针中有个指向操作文件inode的指针，通过这个inode中的i_size与i_sectors[ ]，我们可以顺利知道文件大小与存储位置信息。先将文件已有数据的最后一块数据读出来并与将要写入的数据在缓冲区中共同拼凑成一个完整的块，然后写入磁盘。剩下的数据以块为单位继续写入磁盘即可。
2. 修改sys_write函数,并修改用户态入口write函数,使得用户进程也能写入文件.
